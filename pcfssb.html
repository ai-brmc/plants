    <script>
        // Real alert data from PCFS - April, May, June 2025
        const alertData = [
            // April 2025 alerts
            {equipment: "K-31-01", model: "ST PERFORMANCE", description: "TURB EXTRCTN STM PRS Deviation", type: "Low Warning", timestamp: "4/1/2025 8:19:33 AM"},
            {equipment: "K-16-01", model: "ST PERFORMANCE", description: "ST THRUST BRG INACT TEMP Deviation", type: "Low Warning", timestamp: "4/6/2025 11:59:33 AM"},
            {equipment: "K-16-01", model: "SYNGAS COMP HP PERFORMANCE", description: "HP CASING STG 4 ANTISURGE CTRL VLV FEEDBACK Deviation", type: "High Alert", timestamp: "4/9/2025 9:29:33 PM"},
            {equipment: "K-16-01", model: "SYNGAS COMP LP PERFORMANCE", description: "LP CASING STG 1 STD VOL FLOW Deviation", type: "Low Warning", timestamp: "4/16/2025 1:29:33 AM"},
            {equipment: "K-16-01", model: "SYNGAS COMP HP PERFORMANCE", description: "HP CASING STG 3 STD VOL FLOW Deviation", type: "Low Warning", timestamp: "4/16/2025 1:29:33 AM"},
            {equipment: "K-16-01", model: "SYNGAS COMP LP PERFORMANCE", description: "LP CASING STG 1 SUCTION FLOW Deviation", type: "Low Warning", timestamp: "4/16/2025 1:44:33 AM"},
            {equipment: "K-16-01", model: "SYNGAS COMP HP PERFORMANCE", description: "HP CASING STG 3 SUCTION FLOW Deviation", type: "Low Warning", timestamp: "4/16/2025 1:44:33 AM"},
            {equipment: "K-16-01", model: "ST PERFORMANCE", description: "ST BRG NDE TEMP Deviation", type: "Low Warning", timestamp: "4/16/2025 1:54:33 AM"},
            {equipment: "K-16-01", model: "SYNGAS COMP LP PERFORMANCE", description: "LP CASING STG 2 DISCH PRESS Deviation", type: "Low Warning", timestamp: "4/16/2025 2:09:33 AM"},
            {equipment: "K-16-01", model: "SYNGAS COMP HP PERFORMANCE", description: "HP CASING STG 3 DISCH PRESS Deviation", type: "Low Warning", timestamp: "4/16/2025 2:09:33 AM"},
            {equipment: "K-16-01", model: "ST PERFORMANCE", description: "LUBE OIL SUPPLY TEMP Deviation", type: "High Warning", timestamp: "4/16/2025 3:04:33 AM"},
            {equipment: "K-16-01", model: "ST PERFORMANCE", description: "SURFACE CONDENSER LEVEL 2 Deviation", type: "High Warning", timestamp: "4/16/2025 3:04:33 AM"},
            {equipment: "K-16-01", model: "ST PERFORMANCE", description: "ST BRG DE TEMP Deviation", type: "High Warning", timestamp: "4/16/2025 3:04:33 AM"},
            {equipment: "K-19-01", model: "NH3 REFRIG COMP LP PERFORMANCE", description: "LP COMP LEAKOFF L PRS DE Deviation", type: "High Warning", timestamp: "4/16/2025 8:24:33 AM"},
            {equipment: "K-16-01", model: "ST PERFORMANCE", description: "ST EXTRACTION STEAM TEMP Deviation", type: "High Warning", timestamp: "4/18/2025 4:29:33 AM"},
            {equipment: "K-31-01", model: "GB MECHANICAL", description: "GR Accelerometer (HSS) Actual Value", type: "High Warning", timestamp: "4/21/2025 9:09:37 AM"},
            {equipment: "K-16-01", model: "SYNGAS COMP HP PERFORMANCE", description: "HP CASING STG 4 SUCTION FLOW Deviation", type: "High Warning", timestamp: "4/26/2025 7:14:25 PM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP PERFORMANCE", description: "PROCESS AIR COMP BHR NDE TEMP Deviation", type: "Low Warning", timestamp: "4/27/2025 2:14:25 AM"},
            {equipment: "K-12-01", model: "ST PERFORMANCE", description: "ST INLET STEAM TEMP Deviation", type: "Low Warning", timestamp: "4/27/2025 8:44:25 AM"},
            {equipment: "K-12-01", model: "ST PERFORMANCE", description: "ST EXTRACTION PRESSURE Deviation", type: "Low Warning", timestamp: "4/28/2025 12:14:25 PM"},

            // May 2025 alerts
            {equipment: "K-19-01", model: "NH3 REFRIG COMP HP PERFORMANCE", description: "LP COM 2 STG SUC TEM Deviation - Absolute", type: "High Alert", timestamp: "5/15/2025 2:19:25 PM"},
            {equipment: "K-19-01", model: "NH3 REFRIG COMP HP PERFORMANCE", description: "HP COM 3 STG DISCH PR Deviation - Absolute", type: "Low Warning", timestamp: "5/15/2025 2:19:25 PM"},
            {equipment: "K-19-01", model: "ST PERFORMANCE", description: "TURB THR BRG T ACT A Deviation - Absolute", type: "Low Warning", timestamp: "5/15/2025 2:34:25 PM"},
            {equipment: "K-19-01", model: "NH3 REFRIG COMP LP PERFORMANCE", description: "LP COM 2 STG SUC PR Deviation - Absolute", type: "Low Warning", timestamp: "5/15/2025 2:49:25 PM"},
            {equipment: "K-19-01", model: "NH3 REFRIG COMP LP PERFORMANCE", description: "LP COMP LEAKOFF L PRSNDE Deviation - Absolute", type: "High Warning", timestamp: "5/15/2025 3:44:25 PM"},
            {equipment: "K-19-01", model: "NH3 REFRIG COMP HP PERFORMANCE", description: "HP COMP LP LK-OF PRSNDE Deviation - Absolute", type: "High Warning", timestamp: "5/15/2025 3:54:25 PM"},
            {equipment: "K-19-01", model: "ST PERFORMANCE", description: "TURB JR BRG T Gov A Deviation - Absolute", type: "Low Warning", timestamp: "5/15/2025 3:59:25 PM"},
            {equipment: "K-19-01", model: "ST PERFORMANCE", description: "TURB JR BRG T Exh A Deviation - Absolute", type: "Low Warning", timestamp: "5/15/2025 3:59:25 PM"},
            {equipment: "K-19-01", model: "ST PERFORMANCE", description: "SM K19-01 LO HDR PT Deviation - Absolute", type: "High Warning", timestamp: "5/15/2025 3:59:25 PM"},
            {equipment: "K-19-01", model: "ST PERFORMANCE", description: "K-19-01 ECV LVDT Deviation - Absolute", type: "Low Warning", timestamp: "5/15/2025 4:24:25 PM"},
            {equipment: "K-19-01", model: "ST PERFORMANCE", description: "KT-19-01 SH INLET DP Deviation - Absolute", type: "Low Warning", timestamp: "5/15/2025 4:29:25 PM"},
            {equipment: "K-19-01", model: "NH3 REFRIG COMP LP PERFORMANCE", description: "LP COMP SEAL GAS SUPP DP Actual Value", type: "Low Warning", timestamp: "5/15/2025 4:39:25 PM"},
            {equipment: "K-19-01", model: "ST PERFORMANCE", description: "K-19-01 TURBACTUAL SPEED Deviation - Absolute", type: "Low Warning", timestamp: "5/15/2025 4:39:25 PM"},
            {equipment: "K-19-01", model: "ST PERFORMANCE", description: "ST INLET PRESS Deviation - Absolute", type: "Low Warning", timestamp: "5/15/2025 4:44:25 PM"},
            {equipment: "K-19-01", model: "ST PERFORMANCE", description: "KT-19-01 SH INLET TEMP Deviation - Absolute", type: "Low Warning", timestamp: "5/15/2025 5:59:25 PM"},
            {equipment: "K-19-01", model: "ST PERFORMANCE", description: "TURB EXT STM FLW Deviation - Absolute", type: "High Warning", timestamp: "5/15/2025 8:24:25 PM"},
            {equipment: "K-19-01", model: "ST PERFORMANCE", description: "TURB EXT STM TEM Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 12:54:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP HP PERFORMANCE", description: "HP COM SUCT PR Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 1:49:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP HP PERFORMANCE", description: "K-12-01 3RD DISCHARGE PT Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 1:49:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP HP PERFORMANCE", description: "K-12-01 4TH SUC TT TYP-K Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 1:49:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP HP PERFORMANCE", description: "4TH DISCH- ENGNG VE Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 1:49:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP HP PERFORMANCE", description: "HP COMP DISC TT TYP-K Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 1:49:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP HP PERFORMANCE", description: "K-12-01 4TH SUCTION PT Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 1:49:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP HP PERFORMANCE", description: "HP COM ANTI SUR CV POS Deviation - Absolute", type: "High Alert", timestamp: "5/16/2025 1:49:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP HP PERFORMANCE", description: "HP CMP JR BRG T DE A Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 1:49:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP HP PERFORMANCE", description: "HP COM SUCT TEMP Deviation - Absolute", type: "High Warning", timestamp: "5/16/2025 2:04:25 AM"},
            {equipment: "K-12-01", model: "ST PERFORMANCE", description: "P-12-01A/B DISCH CL Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 2:24:25 AM"},
            {equipment: "K-12-01", model: "ST PERFORMANCE", description: "MCOND WTR DP LVL RET TX Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 2:29:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP HP PERFORMANCE", description: "12FV-004 CTL SIGNAL Deviation - Absolute", type: "High Alert", timestamp: "5/16/2025 2:29:25 AM"},
            {equipment: "K-19-01", model: "ST PERFORMANCE", description: "TURB AX POS A Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 2:59:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP LP PERFORMANCE", description: "K-12-01 1ST DIS TT TYP-K Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 2:59:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP LP PERFORMANCE", description: "K-12-01 1ST DISCHARGE PT Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 2:59:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP LP PERFORMANCE", description: "OIL RESERVR TT TYP-K Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 2:59:25 AM"},
            {equipment: "K-19-01", model: "NH3 REFRIG COMP HP PERFORMANCE", description: "HP CMP AX POS A Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 3:24:25 AM"},
            {equipment: "K-12-01", model: "ST PERFORMANCE", description: "TURB JR BRG T Gov A Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 4:44:25 AM"},
            {equipment: "K-19-01", model: "NH3 REFRIG COMP HP PERFORMANCE", description: "HP COMP LP LK-OF PRS DE Deviation - Absolute", type: "High Warning", timestamp: "5/16/2025 8:09:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP HP PERFORMANCE", description: "K-12 HP COMPDISCH FLW Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 8:24:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP HP PERFORMANCE", description: "K-12-01 3RD DIS TT TYP-K Deviation - Absolute", type: "High Warning", timestamp: "5/16/2025 8:39:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP LP PERFORMANCE", description: "K-12 LP COMPDISCH FLW Deviation - Absolute", type: "High Alert", timestamp: "5/16/2025 11:29:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP LP PERFORMANCE", description: "LP COM DISCH PR Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 11:29:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP LP PERFORMANCE", description: "K-12-01 2ND SUCTION PT Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 11:29:25 AM"},
            {equipment: "K-12-01", model: "PROCESS AIR COMP LP PERFORMANCE", description: "LP COM SUCT TEMP Deviation - Absolute", type: "High Warning", timestamp: "5/16/2025 12:39:25 PM"},
            {equipment: "K-12-01", model: "ST PERFORMANCE", description: "SL->KT-12-01 TEMPERATURE Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 2:29:25 PM"},
            {equipment: "K-12-01", model: "ST PERFORMANCE", description: "KT-12-01 SL INLET DP Deviation - Absolute", type: "Low Warning", timestamp: "5/16/2025 2:29:25 PM"},
            {equipment: "K-31-01", model: "GB MECHANICAL", description: "GR JR BRG T LSS COP E-A Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:34:25 PM"},
            {equipment: "K-31-01", model: "CO2 COMP LP PERFORMANCE", description: "LP COMP 1ST STG SUCT TMP Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:34:25 PM"},
            {equipment: "K-31-01", model: "ST PERFORMANCE", description: "SH->KT-31-01FLOW Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:34:25 PM"},
            {equipment: "K-31-01", model: "GB MECHANICAL", description: "GR JR BRG T HSS COP E-A Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:34:25 PM"},
            {equipment: "K-31-01", model: "GB MECHANICAL", description: "GR JR BRG T HSS FR E-A Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:34:25 PM"},
            {equipment: "K-31-01", model: "ST PERFORMANCE", description: "KT-31-01 SMUOUTLET TEMP Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:34:25 PM"},
            {equipment: "K-31-01", model: "ST PERFORMANCE", description: "TURB JR BRG T Exh A Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:34:25 PM"},
            {equipment: "K-31-01", model: "ST PERFORMANCE", description: "EXTRACTION FLOW Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:34:25 PM"},
            {equipment: "K-31-01", model: "CO2 COMP HP PERFORMANCE", description: "V-31-03 LEVEL Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:34:25 PM"},
            {equipment: "K-16-01", model: "SYNGAS COMP HP PERFORMANCE", description: "HP CASING STG 4 ANTISURGE CTRL VLV DEMAND Deviation - Absolute", type: "High Warning", timestamp: "5/17/2025 12:44:25 PM"},
            {equipment: "K-16-01", model: "SYNGAS COMP LP PERFORMANCE", description: "LP CASING BRG NDE VIB X Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:44:25 PM"},
            {equipment: "K-16-01", model: "SYNGAS COMP LP PERFORMANCE", description: "LP CASING BRG DE VIB X Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:44:25 PM"},
            {equipment: "K-16-01", model: "SYNGAS COMP HP PERFORMANCE", description: "HP CASING BRG DE VIB Y Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:44:25 PM"},
            {equipment: "K-16-01", model: "SYNGAS COMP HP PERFORMANCE", description: "HP CASING STG 3 RECYCLE SUCTION VLV Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:44:25 PM"},
            {equipment: "K-16-01", model: "SYNGAS COMP HP PERFORMANCE", description: "HP CASING BRG DE VIB X Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:44:25 PM"},
            {equipment: "K-16-01", model: "SYNGAS COMP LP PERFORMANCE", description: "LP CASING STG 1 RECYCLE VLV POS Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:44:25 PM"},
            {equipment: "K-16-01", model: "SYNGAS COMP LP PERFORMANCE", description: "LP CASING THRUST BRG ACT TEMP Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:44:25 PM"},
            {equipment: "K-16-01", model: "SYNGAS COMP HP PERFORMANCE", description: "HP CASING STG 3 RECYCLE DISCH VLV Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:44:25 PM"},
            {equipment: "K-16-01", model: "SYNGAS COMP HP PERFORMANCE", description: "HP CASING BRG NDE TEMP Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:44:25 PM"},
            {equipment: "K-16-01", model: "SYNGAS COMP HP PERFORMANCE", description: "HP CASING THRUST BRG INACT TEMP Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 12:44:25 PM"},
            {equipment: "K-31-01", model: "CO2 COMP HP PERFORMANCE", description: "K-31-01 OIL RESERVR TEMP Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 1:39:25 PM"},
            {equipment: "K-16-01", model: "SYNGAS COMP LP PERFORMANCE", description: "LP CASING THRUST BRG INACT TEMP Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 1:54:25 PM"},
            {equipment: "K-16-01", model: "SYNGAS COMP LP PERFORMANCE", description: "LUBE OIL TANK TEMP Deviation - Absolute", type: "Low Warning", timestamp: "5/17/2025 2:09:25 PM"},
            {equipment: "K-19-01", model: "NH3 REFRIG COMP LP PERFORMANCE", description: "19FV-008 CTRL SIGN Deviation - Absolute", type: "High Alert", timestamp: "5/17/2025 3:04:25 PM"},
            {equipment: "K-19-01", model: "NH3 REFRIG COMP LP PERFORMANCE", description: "LP/C 1 STG A/S CV OP Deviation - Absolute", type: "High Alert", timestamp: "5/17/2025 3:04:25 PM"},
            {equipment: "K-31-01", model: "CO2 COMP HP PERFORMANCE", description: "HP CMP JR BRG T NDE A Deviation - Absolute", type: "High Alert", timestamp: "5/17/2025 10:19:25 PM"},
            {equipment: "K-31-01", model: "CO2 COMP HP PERFORMANCE", description: "HP CMP RAD VB NDE Y Deviation - Absolute", type: "Low Warning", timestamp: "5/18/2025 1:04:25 AM"},
            {equipment: "K-19-01", model: "NH3 REFRIG COMP HP PERFORMANCE", description: "19FV-010 CTRL SIGN Deviation - Absolute", type: "High Alert", timestamp: "5/18/2025 12:34:25 PM"},
            {equipment: "K-19-01", model: "NH3 REFRIG COMP HP PERFORMANCE", description: "HP/C 3 STG A/S CV OP Deviation - Absolute", type: "High Alert", timestamp: "5/18/2025 12:34:25 PM"},
            {equipment: "K-16-01", model: "ST PERFORMANCE", description: "ST INLET TEMP Deviation - Absolute", type: "Low Warning", timestamp: "5/18/2025 4:44:25 PM"},

            // June 2025 alerts
            {equipment: "K-31-01", model: "CO2 COMP HP PERFORMANCE", description: "K-31-01F1A/BO/L PRESS Deviation - Absolute", type: "Low Warning", timestamp: "6/6/2025 5:19:22 PM"},
            {equipment: "K-31-01", model: "GB MECHANICAL", description: "GR Accelerometer (HSS) Actual Value", type: "High Alert", timestamp: "6/16/2025 7:24:22 AM"}
        ];

        let severityChart, equipmentChart;

        function getMonthFromTimestamp(timestamp) {
            const date = new Date(timestamp);
            return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;
        }

        function filterData(month) {
            if (month === 'all') return alertData;
            return alertData.filter(alert => getMonthFromTimestamp(alert.timestamp) === month);
        }

        function updateDetailedAlertTable(data) {
            const tbody = document.getElementById('alertTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            if (data.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 20px; color: #6c757d;">No alerts found for selected period</td></tr>';
                return;
            }

            // Sort by timestamp (most recent first)
            const sortedData = data.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));

            // Show all alerts for the filtered month
            sortedData.forEach((alert, index) => {
                const row = tbody.insertRow();
                const alertClass = alert.type === 'High Alert' ? 'high-alert' : 
                                   alert.type === 'High Warning' ? 'high-warning' : 'low-warning';
                
                // Add alternating row colors for better readability
                if (index % 2 === 1) {
                    row.style.backgroundColor = '#f8f9fa';
                }
                
                row.innerHTML = `
                    <td style="font-weight: 600;">${alert.equipment}</td>
                    <td style="font-size: 0.9em;">${alert.model}</td>
                    <td style="font-size: 0.85em;">${alert.description}</td>
                    <td><span class="alert-badge ${alertClass}">${alert.type}</span></td>
                    <td style="font-size: 0.85em;">${alert.timestamp}</td>
                `;
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            try {
                // Create severity chart
                const severityCtx = document.getElementById('severityChart');
                if (severityCtx) {
                    severityChart = new Chart(severityCtx, {
                        type: 'doughnut',
                        data: {
                            labels: ['High Alert (8)', 'High Warning (12)', 'Low Warning (59)'],
                            datasets: [{
                                data: [8, 12, 59],
                                backgroundColor: ['#dc3545', '#fd7e14', '#ffc107'],
                                borderWidth: 2,
                                borderColor: '#fff'
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { position: 'bottom' }
                            }
                        }
                    });
                }

                // Create equipment chart
                const equipmentCtx = document.getElementById('equipmentChart');
                if (equipmentCtx) {
                    equipmentChart = new Chart(equipmentCtx, {
                        type: 'bar',
                        data: {
                            labels: ['K-19-01', 'K-12-01', 'K-16-01', 'K-31-01'],
                            datasets: [{
                                label: 'Alerts',
                                data: [26, 21, 14, 18],
                                backgroundColor: ['#dc3545', '#fd7e14', '#ffc107', '#28a745'],
                                borderRadius: 4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } },
                            scales: { y: { beginAtZero: true } }
                        }
                    });
                }

                // Month filter with detailed alert table update
                const monthFilter = document.getElementById('monthFilter');
                if (monthFilter) {
                    monthFilter.addEventListener('change', function() {
                        const selectedMonth = this.value;
                        const filteredData = filterData(selectedMonth);
                        updateDisplayForMonth(selectedMonth);
                        updateDetailedAlertTable(filteredData);
                    });
                }

                // Initialize with May 2025 data and populate detailed alert table
                const initialData = filterData('2025-05');
                updateDetailedAlertTable(initialData);
                updateEquipmentModelSummary(initialData);

                console.log('Dashboard loaded successfully');
            } catch (error) {
                console.error('Error loading dashboard:', error);
            }
        });

        function updateEquipmentModelSummary(data) {
            // This function will update the Equipment & Model Summary table with filtered data
            const summaryTable = document.querySelector('#equipmentSummaryTable tbody');
            if (!summaryTable) return;
            
            // Group by equipment and model
            const equipmentModelCounts = {};
            data.forEach(alert => {
                const key = `${alert.equipment}|${alert.model}`;
                if (!equipmentModelCounts[key]) {
                    equipmentModelCounts[key] = {
                        equipment: alert.equipment,
                        model: alert.model,
                        count: 0
                    };
                }
                equipmentModelCounts[key].count++;
            });
            
            // Convert to array and sort by count
            const sortedEquipment = Object.values(equipmentModelCounts)
                .sort((a, b) => b.count - a.count);
            
            const totalAlerts = data.length;
            
            // Clear existing content
            summaryTable.innerHTML = '';
            
            // Add NH3 Refrigeration Compressor Systems
            const nh3Equipment = sortedEquipment.filter(item => item.equipment === 'K-19-01');
            if (nh3Equipment.length > 0) {
                const headerRow = summaryTable.insertRow();
                headerRow.style.backgroundColor = '#e8f5ff';
                headerRow.innerHTML = `<td colspan="4"><strong>🔵 NH3 Refrigeration Compressor Systems</strong></td>`;
                
                nh3Equipment.forEach(item => {
                    const row = summaryTable.insertRow();
                    const percentage = totalAlerts > 0 ? ((item.count / totalAlerts) * 100).toFixed(1) : '0.0';
                    row.innerHTML = `
                        <td>${item.equipment}</td>
                        <td>${item.model}</td>
                        <td>${item.count}</td>
                        <td>${percentage}%</td>
                    `;
                });
            }
            
            // Add Process Air Compressor Systems
            const airCompEquipment = sortedEquipment.filter(item => item.equipment === 'K-12-01');
            if (airCompEquipment.length > 0) {
                const headerRow = summaryTable.insertRow();
                headerRow.style.backgroundColor = '#fff3e0';
                headerRow.innerHTML = `<td colspan="4"><strong>🟠 Process Air Compressor Systems</strong></td>`;
                
                airCompEquipment.forEach(item => {
                    const row = summaryTable.insertRow();
                    const percentage = totalAlerts > 0 ? ((item.count / totalAlerts) * 100).toFixed(1) : '0.0';
                    row.innerHTML = `
                        <td>${item.equipment}</td>
                        <td>${item.model}</td>
                        <td>${item.count}</td>
                        <td>${percentage}%</td>
                    `;
                });
            }
            
            // Add Syngas Compressor Systems
            const syngasEquipment = sortedEquipment.filter(item => item.equipment === 'K-16-01');
            if (syngasEquipment.length > 0) {
                const headerRow = summaryTable.insertRow();
                headerRow.style.backgroundColor = '#e8f8e8';
                headerRow.innerHTML = `<td colspan="4"><strong>🟢 Syngas Compressor Systems</strong></td>`;
                
                syngasEquipment.forEach(item => {
                    const row = summaryTable.insertRow();
                    const percentage = totalAlerts > 0 ? ((item.count / totalAlerts) * 100).toFixed(1) : '0.0';
                    row.innerHTML = `
                        <td>${item.equipment}</td>
                        <td>${item.model}</td>
                        <td>${item.count}</td>
                        <td>${percentage}%</td>
                    `;
                });
            }
            
            // Add CO2 Compressor & Gearbox Systems
            const co2Equipment = sortedEquipment.filter(item => item.equipment === 'K-31-01');
            if (co2Equipment.length > 0) {
                const headerRow = summaryTable.insertRow();
                headerRow.style.backgroundColor = '#f3e8ff';
                headerRow.innerHTML = `<td colspan="4"><strong>🟣 CO2 Compressor & Gearbox Systems</strong></td>`;
                
                co2Equipment.forEach(item => {
                    const row = summaryTable.insertRow();
                    const percentage = totalAlerts > 0 ? ((item.count / totalAlerts) * 100).toFixed(1) : '0.0';
                    row.innerHTML = `
                        <td>${item.equipment}</td>
                        <td>${item.model}</td>
                        <td>${item.count}</td>
                        <td>${percentage}%</td>
                    `;
                });
            }
            
            // Add total row
            const totalRow = summaryTable.insertRow();
            totalRow.style.backgroundColor = '#f8f9fa';
            totalRow.style.fontWeight = 'bold';
            totalRow.innerHTML = `
                <td colspan="2">Total</td>
                <td>${totalAlerts}</td>
                <td>100%</td>
            `;
        }

        function updateDisplayForMonth(month) {
            const statsDisplay = document.getElementById('statsDisplay');
            const totalCount = document.getElementById('totalCount');
            const filteredData = filterData(month);
            
            // Count by severity for the filtered data
            const highAlert = filteredData.filter(a => a.type === 'High Alert').length;
            const highWarning = filteredData.filter(a => a.type === 'High Warning').length;
            const lowWarning = filteredData.filter(a => a.type === 'Low Warning').length;
            
            // Count by equipment for the filtered data
            const equipmentCounts = {};
            filteredData.forEach(alert => {
                equipmentCounts[alert.equipment] = (equipmentCounts[alert.equipment] || 0) + 1;
            });
            
            // Update stats display and total count
            if (month === '2025-04') {
                statsDisplay.textContent = '📊 Showing 20 alerts for April 2025';
            } else if (month === '2025-05') {
                statsDisplay.textContent = '📊 Showing 79 alerts for May 2025';
            } else if (month === '2025-06') {
                statsDisplay.textContent = '📊 Showing 2 alerts for June 2025';
            } else {
                statsDisplay.textContent = '📊 Showing 101 alerts for all months';
            }
            
            totalCount.textContent = filteredData.length;
            
            // Update equipment counts
            updateCounts(
                equipmentCounts['K-19-01'] || 0,
                equipmentCounts['K-12-01'] || 0,
                equipmentCounts['K-16-01'] || 0,
                equipmentCounts['K-31-01'] || 0
            );
            
            // Update severity chart
            if (severityChart) {
                severityChart.data.datasets[0].data = [highAlert, highWarning, lowWarning];
                severityChart.data.labels = [
                    `High Alert (${highAlert})`, 
                    `High Warning (${highWarning})`, 
                    `Low Warning (${lowWarning})`
                ];
                severityChart.update();
            }
            
            // Update equipment chart
            if (equipmentChart) {
                equipmentChart.data.datasets[0].data = [
                    equipmentCounts['K-19-01'] || 0,
                    equipmentCounts['K-12-01'] || 0,
                    equipmentCounts['K-16-01'] || 0,
                    equipmentCounts['K-31-01'] || 0
                ];
                equipmentChart.update();
            }
            
            // Update Equipment & Model Summary table
            updateEquipmentModelSummary(filteredData);
        }

        function updateCounts(k19, k12, k16, k31) {
            document.getElementById('k19Count').textContent = k19;
            document.getElementById('k12Count').textContent = k12;
            document.getElementById('k16Count').textContent = k16;
            document.getElementById('k31Count').textContent = k31;
        }
    </script><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PETRONAS PCFS Machine Monitoring Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .filter-section {
            background: #f8f9fa;
            padding: 20px 40px;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }
        
        .filter-label {
            font-weight: 600;
            color: #495057;
        }
        
        .filter-select {
            padding: 10px 20px;
            border: 2px solid #007bff;
            border-radius: 8px;
            background: white;
            font-size: 1em;
            font-weight: 500;
            min-width: 200px;
        }
        
        .stats-bar {
            background: #e9ecef;
            padding: 15px 40px;
            text-align: center;
            font-weight: 600;
            color: #495057;
        }
        
        .dashboard-content {
            padding: 30px 40px;
        }
        
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
            border: 1px solid #e9ecef;
        }
        
        .card-title {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 15px;
            color: #495057;
        }
        
        .total-card {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            text-align: center;
        }
        
        .total-number {
            font-size: 3em;
            font-weight: 700;
            margin: 10px 0;
        }
        
        .chart-container {
            height: 300px;
            margin-top: 15px;
        }
        
        .alert-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            margin-top: 20px;
        }
        
        .alert-table th {
            background: #495057;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .alert-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .alert-table tr:hover {
            background: #f8f9fa;
        }
        
        .alert-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            text-align: center;
            display: inline-block;
            min-width: 90px;
        }
        
        .high-alert {
            background: #dc3545;
            color: white;
        }
        
        .high-warning {
            background: #fd7e14;
            color: white;
        }
        
        .low-warning {
            background: #ffc107;
            color: #212529;
        }
        
        .equipment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .equipment-card {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }
        
        .equipment-name {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .equipment-count {
            font-size: 2em;
            font-weight: 700;
            margin: 10px 0;
        }
        
        .equipment-type {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .scrollable-table {
            max-height: 500px;
            overflow-y: auto;
            border-radius: 10px;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .header, .filter-section, .dashboard-content {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .filter-section {
                flex-direction: column;
                gap: 10px;
            }
            
            .total-number {
                font-size: 2.5em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>PETRONAS PCFS Machine Monitoring Dashboard</h1>
            <p>Real Time Alert Management - PCFS Plant Operations</p>
        </div>
        
        <div class="filter-section">
            <span class="filter-label">📅 Filter by Month:</span>
            <select class="filter-select" id="monthFilter">
                <option value="all">All Months</option>
                <option value="2025-04">April 2025</option>
                <option value="2025-05" selected>May 2025</option>
                <option value="2025-06">June 2025</option>
            </select>
        </div>
        
        <div class="stats-bar" id="statsDisplay">
            📊 Showing alerts for May 2025
        </div>
        
        <div class="dashboard-content">
            <div class="summary-cards">
                <div class="card total-card">
                    <div class="card-title">Total Alerts</div>
                    <div class="total-number" id="totalCount">79</div>
                    <div>All Equipment</div>
                </div>
                
                <div class="card">
                    <div class="card-title">Alert Severity</div>
                    <div class="chart-container">
                        <canvas id="severityChart"></canvas>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">Equipment Alerts</div>
                    <div class="chart-container">
                        <canvas id="equipmentChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">Equipment Overview</div>
                <div class="equipment-grid">
                    <div class="equipment-card">
                        <div class="equipment-name">K-19-01</div>
                        <div class="equipment-count" id="k19Count">26</div>
                        <div class="equipment-type">NH3 Refrigeration</div>
                    </div>
                    <div class="equipment-card">
                        <div class="equipment-name">K-12-01</div>
                        <div class="equipment-count" id="k12Count">21</div>
                        <div class="equipment-type">Process Air Comp</div>
                    </div>
                    <div class="equipment-card">
                        <div class="equipment-name">K-16-01</div>
                        <div class="equipment-count" id="k16Count">14</div>
                        <div class="equipment-type">Syngas Compressor</div>
                    </div>
                    <div class="equipment-card">
                        <div class="equipment-name">K-31-01</div>
                        <div class="equipment-count" id="k31Count">18</div>
                        <div class="equipment-type">CO2 Comp & Gearbox</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">📊 Equipment & Model Summary</div>
                <table class="alert-table" id="equipmentSummaryTable">
                    <thead>
                        <tr>
                            <th>Equipment</th>
                            <th>Model Type</th>
                            <th>Count</th>
                            <th>Percentage</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background-color: #e8f5ff;">
                            <td colspan="4"><strong>🔵 NH3 Refrigeration Compressor Systems</strong></td>
                        </tr>
                        <tr>
                            <td>K-19-01</td>
                            <td>NH3 REFRIG COMP HP PERFORMANCE</td>
                            <td>15</td>
                            <td>19.0%</td>
                        </tr>
                        <tr>
                            <td>K-19-01</td>
                            <td>ST PERFORMANCE</td>
                            <td>8</td>
                            <td>10.1%</td>
                        </tr>
                        <tr>
                            <td>K-19-01</td>
                            <td>NH3 REFRIG COMP LP PERFORMANCE</td>
                            <td>3</td>
                            <td>3.8%</td>
                        </tr>
                        <tr style="background-color: #fff3e0;">
                            <td colspan="4"><strong>🟠 Process Air Compressor Systems</strong></td>
                        </tr>
                        <tr>
                            <td>K-12-01</td>
                            <td>PROCESS AIR COMP HP PERFORMANCE</td>
                            <td>14</td>
                            <td>17.7%</td>
                        </tr>
                        <tr>
                            <td>K-12-01</td>
                            <td>PROCESS AIR COMP LP PERFORMANCE</td>
                            <td>4</td>
                            <td>5.1%</td>
                        </tr>
                        <tr>
                            <td>K-12-01</td>
                            <td>ST PERFORMANCE</td>
                            <td>3</td>
                            <td>3.8%</td>
                        </tr>
                        <tr style="background-color: #e8f8e8;">
                            <td colspan="4"><strong>🟢 Syngas Compressor Systems</strong></td>
                        </tr>
                        <tr>
                            <td>K-16-01</td>
                            <td>SYNGAS COMP LP PERFORMANCE</td>
                            <td>8</td>
                            <td>10.1%</td>
                        </tr>
                        <tr>
                            <td>K-16-01</td>
                            <td>SYNGAS COMP HP PERFORMANCE</td>
                            <td>5</td>
                            <td>6.3%</td>
                        </tr>
                        <tr>
                            <td>K-16-01</td>
                            <td>ST PERFORMANCE</td>
                            <td>1</td>
                            <td>1.3%</td>
                        </tr>
                        <tr style="background-color: #f3e8ff;">
                            <td colspan="4"><strong>🟣 CO2 Compressor & Gearbox Systems</strong></td>
                        </tr>
                        <tr>
                            <td>K-31-01</td>
                            <td>CO2 COMP HP PERFORMANCE</td>
                            <td>4</td>
                            <td>5.1%</td>
                        </tr>
                        <tr>
                            <td>K-31-01</td>
                            <td>GB MECHANICAL</td>
                            <td>4</td>
                            <td>5.1%</td>
                        </tr>
                        <tr>
                            <td>K-31-01</td>
                            <td>ST PERFORMANCE</td>
                            <td>3</td>
                            <td>3.8%</td>
                        </tr>
                        <tr>
                            <td>K-31-01</td>
                            <td>CO2 COMP LP PERFORMANCE</td>
                            <td>1</td>
                            <td>1.3%</td>
                        </tr>
                        <tr style="background-color: #f8f9fa; font-weight: bold;">
                            <td colspan="2">Total</td>
                            <td>79 (100%)</td>
                            <td>All Systems</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="card">
                <div class="card-title">📋 Detailed Alert Information</div>
                <table class="alert-table">
                    <thead>
                        <tr>
                            <th>Equipment</th>
                            <th>Model</th>
                            <th>Description</th>
                            <th>Alert Type</th>
                            <th>Timestamp</th>
                        </tr>
                    </thead>
                    <tbody id="alertTableBody">
                        <!-- Sample data - will be populated by JavaScript -->
                        <tr>
                            <td>K-19-01</td>
                            <td>NH3 REFRIG COMP HP PERFORMANCE</td>
                            <td>LP COM 2 STG SUC TEM Deviation - Absolute</td>
                            <td><span class="alert-badge high-alert">High Alert</span></td>
                            <td>5/15/2025 2:19:25 PM</td>
                        </tr>
                        <tr style="background: #f8f9fa;">
                            <td>K-19-01</td>
                            <td>NH3 REFRIG COMP HP PERFORMANCE</td>
                            <td>HP COM 3 STG DISCH PR Deviation - Absolute</td>
                            <td><span class="alert-badge low-warning">Low Warning</span></td>
                            <td>5/15/2025 2:19:25 PM</td>
                        </tr>
                        <tr>
                            <td>K-19-01</td>
                            <td>ST PERFORMANCE</td>
                            <td>TURB THR BRG T ACT A Deviation - Absolute</td>
                            <td><span class="alert-badge low-warning">Low Warning</span></td>
                            <td>5/15/2025 2:34:25 PM</td>
                        </tr>
                        <tr style="background: #f8f9fa;">
                            <td>K-19-01</td>
                            <td>NH3 REFRIG COMP LP PERFORMANCE</td>
                            <td>LP COMP LEAKOFF L PRSNDE Deviation - Absolute</td>
                            <td><span class="alert-badge high-warning">High Warning</span></td>
                            <td>5/15/2025 3:44:25 PM</td>
                        </tr>
                        <tr>
                            <td>K-12-01</td>
                            <td>PROCESS AIR COMP HP PERFORMANCE</td>
                            <td>HP COM ANTI SUR CV POS Deviation - Absolute</td>
                            <td><span class="alert-badge high-alert">High Alert</span></td>
                            <td>5/16/2025 1:49:25 AM</td>
                        </tr>
                        <tr style="background: #f8f9fa;">
                            <td>K-12-01</td>
                            <td>PROCESS AIR COMP HP PERFORMANCE</td>
                            <td>12FV-004 CTL SIGNAL Deviation - Absolute</td>
                            <td><span class="alert-badge high-alert">High Alert</span></td>
                            <td>5/16/2025 2:29:25 AM</td>
                        </tr>
                        <tr>
                            <td>K-16-01</td>
                            <td>SYNGAS COMP HP PERFORMANCE</td>
                            <td>HP CASING STG 4 ANTISURGE CTRL VLV DEMAND Deviation</td>
                            <td><span class="alert-badge high-warning">High Warning</span></td>
                            <td>5/17/2025 12:44:25 PM</td>
                        </tr>
                        <tr style="background: #f8f9fa;">
                            <td>K-31-01</td>
                            <td>CO2 COMP HP PERFORMANCE</td>
                            <td>HP CMP JR BRG T NDE A Deviation - Absolute</td>
                            <td><span class="alert-badge high-alert">High Alert</span></td>
                            <td>5/17/2025 10:19:25 PM</td>
                        </tr>
                        <tr>
                            <td>K-19-01</td>
                            <td>NH3 REFRIG COMP HP PERFORMANCE</td>
                            <td>19FV-010 CTRL SIGN Deviation - Absolute</td>
                            <td><span class="alert-badge high-alert">High Alert</span></td>
                            <td>5/18/2025 12:34:25 PM</td>
                        </tr>
                        <tr style="background: #f8f9fa;">
                            <td>K-19-01</td>
                            <td>NH3 REFRIG COMP HP PERFORMANCE</td>
                            <td>HP/C 3 STG A/S CV OP Deviation - Absolute</td>
                            <td><span class="alert-badge high-alert">High Alert</span></td>
                            <td>5/18/2025 12:34:25 PM</td>
                        </tr>
                        <tr>
                            <td>K-12-01</td>
                            <td>PROCESS AIR COMP LP PERFORMANCE</td>
                            <td>K-12 LP COMPDISCH FLW Deviation - Absolute</td>
                            <td><span class="alert-badge high-alert">High Alert</span></td>
                            <td>5/16/2025 11:29:25 AM</td>
                        </tr>
                        <tr style="background: #f8f9fa;">
                            <td>K-12-01</td>
                            <td>PROCESS AIR COMP HP PERFORMANCE</td>
                            <td>HP COM SUCT TEMP Deviation - Absolute</td>
                            <td><span class="alert-badge high-warning">High Warning</span></td>
                            <td>5/16/2025 2:04:25 AM</td>
                        </tr>
                        <tr>
                            <td>K-16-01</td>
                            <td>SYNGAS COMP LP PERFORMANCE</td>
                            <td>LP CASING BRG NDE VIB X Deviation - Absolute</td>
                            <td><span class="alert-badge low-warning">Low Warning</span></td>
                            <td>5/17/2025 12:44:25 PM</td>
                        </tr>
                        <tr style="background: #f8f9fa;">
                            <td>K-31-01</td>
                            <td>GB MECHANICAL</td>
                            <td>GR JR BRG T LSS COP E-A Deviation - Absolute</td>
                            <td><span class="alert-badge low-warning">Low Warning</span></td>
                            <td>5/17/2025 12:34:25 PM</td>
                        </tr>
                        <tr>
                            <td>K-19-01</td>
                            <td>ST PERFORMANCE</td>
                            <td>TURB EXT STM FLW Deviation - Absolute</td>
                            <td><span class="alert-badge high-warning">High Warning</span></td>
                            <td>5/15/2025 8:24:25 PM</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>


</body>
</html>